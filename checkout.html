<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout | LearnFlow</title>
    <meta name="description" content="Complete your purchase and start building your education business with LearnFlow">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .gradient-text {
            background: linear-gradient(135deg, #2563eb, #9333ea);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .gradient-border {
            background: linear-gradient(135deg, #2563eb, #9333ea);
        }

        .plan-card {
            transition: all 0.3s ease;
        }

        .plan-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.15);
        }

        .plan-card.selected {
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2563eb;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-900">

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 glass h-16 flex items-center">
        <div class="max-w-7xl mx-auto px-6 w-full flex justify-between items-center">
            <a href="preview.html" class="flex items-center space-x-2">
                <div class="w-8 h-8 rounded-lg gradient-border flex items-center justify-center text-white font-bold">L
                </div>
                <span class="text-xl font-bold gradient-text">LearnFlow</span>
            </a>
            <div class="flex items-center space-x-4">
                <a href="preview.html" class="text-sm font-semibold text-gray-700 hover:text-blue-600">← Back to
                    Home</a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="pt-32 pb-20 px-6">
        <div class="max-w-6xl mx-auto">
            <!-- Progress Steps -->
            <div class="mb-12">
                <div class="flex items-center justify-center space-x-4">
                    <div class="flex items-center">
                        <div
                            class="w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold">
                            1</div>
                        <span class="ml-2 font-semibold text-blue-600">Choose Plan</span>
                    </div>
                    <div class="w-16 h-1 bg-gray-200"></div>
                    <div class="flex items-center">
                        <div id="step2-indicator"
                            class="w-10 h-10 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center font-bold">
                            2</div>
                        <span id="step2-text" class="ml-2 font-semibold text-gray-500">Payment</span>
                    </div>
                    <div class="w-16 h-1 bg-gray-200"></div>
                    <div class="flex items-center">
                        <div id="step3-indicator"
                            class="w-10 h-10 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center font-bold">
                            3</div>
                        <span id="step3-text" class="ml-2 font-semibold text-gray-500">Complete</span>
                    </div>
                </div>
            </div>

            <!-- Page Title -->
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-extrabold mb-4">Choose Your <span class="gradient-text">Plan</span>
                </h1>
                <p class="text-lg text-gray-600">Start your 7-day free trial. No credit card required.</p>
            </div>

            <!-- Pricing Plans -->
            <div id="pricing-section" class="grid md:grid-cols-3 gap-8 mb-12">
                <!-- Starter Plan -->
                <div class="plan-card bg-white rounded-3xl p-8 border-2 border-gray-200 cursor-pointer"
                    data-plan="starter" data-price="29" data-price-id="price_starter">
                    <div class="mb-6">
                        <h3 class="text-2xl font-bold mb-2">Starter</h3>
                        <div class="flex items-baseline mb-4">
                            <span class="text-4xl font-extrabold">$29</span>
                            <span class="text-gray-500 ml-2">/month</span>
                        </div>
                        <p class="text-gray-600">Perfect for getting started</p>
                    </div>
                    <ul class="space-y-4 mb-8">
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            Up to 3 courses
                        </li>
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            100 students
                        </li>
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            AI Course Builder
                        </li>
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            Basic support
                        </li>
                    </ul>
                    <button
                        class="select-plan-btn w-full py-4 rounded-xl font-bold border-2 border-gray-300 hover:border-blue-600 hover:text-blue-600 transition">
                        Select Plan
                    </button>
                </div>

                <!-- Professional Plan (Most Popular) -->
                <div class="plan-card bg-white rounded-3xl p-8 border-2 border-blue-600 cursor-pointer relative"
                    data-plan="professional" data-price="79" data-price-id="price_professional">
                    <div class="absolute -top-4 left-1/2 transform -translate-x-1/2">
                        <span class="bg-blue-600 text-white px-4 py-1 rounded-full text-sm font-bold">Most
                            Popular</span>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-2xl font-bold mb-2">Professional</h3>
                        <div class="flex items-baseline mb-4">
                            <span class="text-4xl font-extrabold gradient-text">$79</span>
                            <span class="text-gray-500 ml-2">/month</span>
                        </div>
                        <p class="text-gray-600">For growing businesses</p>
                    </div>
                    <ul class="space-y-4 mb-8">
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            Unlimited courses
                        </li>
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            1,000 students
                        </li>
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            AI Course Builder + Site Builder
                        </li>
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            Priority support
                        </li>
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            Custom domain
                        </li>
                    </ul>
                    <button
                        class="select-plan-btn w-full py-4 rounded-xl font-bold gradient-border text-white hover:opacity-90 transition">
                        Select Plan
                    </button>
                </div>

                <!-- Enterprise Plan -->
                <div class="plan-card bg-white rounded-3xl p-8 border-2 border-gray-200 cursor-pointer"
                    data-plan="enterprise" data-price="199" data-price-id="price_enterprise">
                    <div class="mb-6">
                        <h3 class="text-2xl font-bold mb-2">Enterprise</h3>
                        <div class="flex items-baseline mb-4">
                            <span class="text-4xl font-extrabold">$199</span>
                            <span class="text-gray-500 ml-2">/month</span>
                        </div>
                        <p class="text-gray-600">For large organizations</p>
                    </div>
                    <ul class="space-y-4 mb-8">
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            Everything in Professional
                        </li>
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            Unlimited students
                        </li>
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            White-label mobile app
                        </li>
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            Dedicated account manager
                        </li>
                        <li class="flex items-center text-gray-700">
                            <svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            Custom integrations
                        </li>
                    </ul>
                    <button
                        class="select-plan-btn w-full py-4 rounded-xl font-bold border-2 border-gray-300 hover:border-blue-600 hover:text-blue-600 transition">
                        Select Plan
                    </button>
                </div>
            </div>

            <!-- Checkout Form (Hidden initially) -->
            <div id="checkout-section" class="hidden max-w-2xl mx-auto">
                <div class="bg-white rounded-3xl p-8 shadow-xl border border-gray-200">
                    <h2 class="text-2xl font-bold mb-6">Complete Your Purchase</h2>

                    <!-- Selected Plan Summary -->
                    <div id="plan-summary" class="bg-gray-50 rounded-xl p-6 mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <div>
                                <h3 id="selected-plan-name" class="font-bold text-lg"></h3>
                                <p class="text-sm text-gray-600">Billed monthly</p>
                            </div>
                            <div class="text-right">
                                <div id="selected-plan-price" class="text-2xl font-bold gradient-text"></div>
                                <button id="change-plan-btn" class="text-sm text-blue-600 hover:underline">Change
                                    plan</button>
                            </div>
                        </div>
                        <div class="border-t border-gray-200 pt-4">
                            <div class="flex justify-between text-sm mb-2">
                                <span class="text-gray-600">7-day free trial</span>
                                <span class="font-semibold text-green-600">$0.00</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-bold">Due today</span>
                                <span class="font-bold text-xl">$0.00</span>
                            </div>
                        </div>
                    </div>

                    <!-- Email Input -->
                    <div class="mb-6">
                        <label for="email" class="block text-sm font-semibold mb-2">Email</label>
                        <input type="email" id="email" placeholder="you@example.com"
                            class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-blue-600 focus:outline-none">
                    </div>

                    <!-- Checkout Button -->
                    <button id="checkout-btn"
                        class="w-full py-4 rounded-xl font-bold gradient-border text-white hover:opacity-90 transition flex items-center justify-center">
                        <span id="checkout-btn-text">Start Free Trial</span>
                        <div id="checkout-spinner" class="spinner ml-3 hidden"></div>
                    </button>

                    <p class="text-xs text-gray-500 text-center mt-4">
                        By clicking "Start Free Trial", you agree to our Terms of Service and Privacy Policy.
                        Your card will be charged after the 7-day trial period ends.
                    </p>
                </div>

                <!-- Security Badges -->
                <div class="mt-8 flex items-center justify-center space-x-6 text-gray-500">
                    <div class="flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd"
                                d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
                                clip-rule="evenodd"></path>
                        </svg>
                        <span class="text-sm">Secure SSL Encryption</span>
                    </div>
                    <div class="flex items-center">
                        <span class="text-sm font-semibold">Powered by Stripe</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-black text-white py-12 px-6">
        <div class="max-w-7xl mx-auto text-center">
            <p class="text-gray-400 text-sm">© 2026 LearnFlow. All rights reserved.</p>
            <div class="flex space-x-6 mt-4 justify-center">
                <a href="privacy.html" class="hover:text-white transition text-sm">Privacy Policy</a>
                <a href="terms.html" class="hover:text-white transition text-sm">Terms of Service</a>
            </div>
        </div>
    </footer>

    <script>
        // Initialize Stripe (Replace with your publishable key)
        const stripe = Stripe('pk_test_your_publishable_key_here');

        let selectedPlan = null;
        const planCards = document.querySelectorAll('.plan-card');
        const pricingSection = document.getElementById('pricing-section');
        const checkoutSection = document.getElementById('checkout-section');
        const checkoutBtn = document.getElementById('checkout-btn');
        const emailInput = document.getElementById('email');
        const changePlanBtn = document.getElementById('change-plan-btn');

        // Plan selection
        planCards.forEach(card => {
            card.addEventListener('click', function () {
                // Remove selected class from all cards
                planCards.forEach(c => c.classList.remove('selected'));

                // Add selected class to clicked card
                this.classList.add('selected');

                // Store selected plan data
                selectedPlan = {
                    name: this.dataset.plan,
                    price: this.dataset.price,
                    priceId: this.dataset.priceId
                };

                // Show checkout section
                showCheckoutSection();
            });
        });

        function showCheckoutSection() {
            // Update plan summary
            document.getElementById('selected-plan-name').textContent =
                selectedPlan.name.charAt(0).toUpperCase() + selectedPlan.name.slice(1) + ' Plan';
            document.getElementById('selected-plan-price').textContent =
                '$' + selectedPlan.price + '/mo';

            // Hide pricing section and show checkout
            pricingSection.classList.add('hidden');
            checkoutSection.classList.remove('hidden');

            // Update progress indicators
            document.getElementById('step2-indicator').classList.remove('bg-gray-200', 'text-gray-500');
            document.getElementById('step2-indicator').classList.add('bg-blue-600', 'text-white');
            document.getElementById('step2-text').classList.remove('text-gray-500');
            document.getElementById('step2-text').classList.add('text-blue-600');

            // Scroll to checkout section
            checkoutSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Change plan button
        changePlanBtn.addEventListener('click', function () {
            pricingSection.classList.remove('hidden');
            checkoutSection.classList.add('hidden');

            // Reset progress indicators
            document.getElementById('step2-indicator').classList.add('bg-gray-200', 'text-gray-500');
            document.getElementById('step2-indicator').classList.remove('bg-blue-600', 'text-white');
            document.getElementById('step2-text').classList.add('text-gray-500');
            document.getElementById('step2-text').classList.remove('text-blue-600');

            // Scroll to pricing section
            pricingSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });

        // Checkout button
        checkoutBtn.addEventListener('click', async function () {
            const email = emailInput.value.trim();

            if (!email || !email.includes('@')) {
                alert('Please enter a valid email address');
                return;
            }

            if (!selectedPlan) {
                alert('Please select a plan');
                return;
            }

            // Show loading state
            checkoutBtn.disabled = true;
            document.getElementById('checkout-btn-text').textContent = 'Processing...';
            document.getElementById('checkout-spinner').classList.remove('hidden');

            try {
                // Call your backend to create a checkout session
                const response = await fetch('/api/payments/create-subscription-checkout', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        price_id: selectedPlan.priceId,
                        success_url: window.location.origin + '/success.html?session_id={CHECKOUT_SESSION_ID}',
                        cancel_url: window.location.origin + '/checkout.html',
                        customer_email: email
                    })
                });

                const session = await response.json();

                // Redirect to Stripe Checkout
                const result = await stripe.redirectToCheckout({
                    sessionId: session.sessionId
                });

                if (result.error) {
                    alert(result.error.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
            } finally {
                // Reset button state
                checkoutBtn.disabled = false;
                document.getElementById('checkout-btn-text').textContent = 'Start Free Trial';
                document.getElementById('checkout-spinner').classList.add('hidden');
            }
        });
    </script>

</body>

</html>