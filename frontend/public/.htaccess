<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # 1. Do not rewrite API requests to index.html
  # This prevents the "Unexpected token <" error in JSON parsing
  # Requests to /api/ will fall through to the backend (or 404 if backend is down)
  RewriteCond %{REQUEST_URI} ^/api/ [NC]
  RewriteRule ^ - [L]

  # 2. Serve index.html for any other request that isn't a file
  # This enables React Router (SPA) to handle navigation
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>